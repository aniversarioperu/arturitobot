<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Vigilando las cárceles peruanas desde Twitter</title>

        <link rel="icon" type="image/png" href="favicon.png">

        <!-- Bootstrap -->
        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
        
        <style>
            #map_canvas {
                width: 900px;
                height: 500px;
                background-color: #CCC;
            }
        </style>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script
            src="https://maps.googleapis.com/maps/api/js?libraries=geometry,visualization&sensor=false"></script>
        <script>
            function initialize() {

                var carceles = 
                [
"Penal Diroes",
"Penal de Sullana",
"Penal de Picsi (Chiclayo)",
"Penal de Trujillo",
"Penal de Huacariz",
"Penal de Chota",
"Penal de Jaen",
"Penal de Huaraz",
"Penal Santa Mónica",
"Penal de Lurigancho",
"Penal Castro Castro",
"Penal San Jorge",
"Penal de Cañete",
"Penal de Huaral",
"Penal de Carquin",
"Penal de Piedras Gordas",
"Carceleta Palacio de Justicia",
"Penal de Huánuco",
"Penal de Pucallpa",
"Penal Maranguita"
]
                var results = 
[
["","Penal Diroes",-12.040680,-76.911100],
["","Penal de Sullana",-4.897520,-80.694610],
["","Penal de Picsi (Chiclayo)",-6.718340,-79.762860],
["","Penal de Trujillo",-8.027400,-79.056820],
["","Penal de Huacariz",-7.190370,-78.48610],
["","Penal de Chota",-6.55830,-78.663350],
["","Penal de Jaen",-5.709670,-78.805790],
["","Penal de Huaraz",-9.526860,-77.534550],
["","Penal Santa Mónica",-12.173500,-77.018900],
["","Penal de Lurigancho",-11.991860,-76.996690],
["","Penal Castro Castro",-11.983700,-76.989520],
["","Penal San Jorge",-12.056480,-77.027890],
["","Penal de Cañete",-13.06210,-76.295730],
["","Penal de Huaral",-11.546450,-77.160430],
["","Penal de Carquin",-11.089630,-77.624750],
["","Penal de Piedras Gordas",-11.811420,-77.120070],
["","Carceleta Palacio de Justicia",-12.057670,-77.034920],
["","Penal de Huánuco",-9.966680,-76.252900],
["","Penal de Pucallpa",-8.406420,-74.630590],
["","Penal Maranguita",-8.409880,-74.55280],
                
                {% content %}
];

                var map_canvas = document.getElementById('map_canvas');
                var map_options = {
                    center: new google.maps.LatLng(-12.0885, -77.04418),
                    zoom: 12,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                }
                var map = new google.maps.Map(map_canvas, map_options);
                var infowindow = new google.maps.InfoWindow({
                    disableAutoPan: false
                });


                for(var i = 0; i < results.length; i++) {
                    if( carceles.indexOf(results[i][1]) >= 0 ) {
                        var marker = new google.maps.Marker({
                            position: new google.maps.LatLng(results[i][2], results[i][3]),
                            title: results[i][1],
                            icon: 'img/agent.png',
                            zIndex: 9999,
                            map: map
                        });
                    }
                    else {
                        var marker = new google.maps.Marker({
                            position: new google.maps.LatLng(results[i][2], results[i][3]),
                            title: results[i][1],
                            map: map
                       });
                    }

                    google.maps.event.addListener(marker, "click", (function(marker, i) {
                        return function() {
                            if( results[i][0] == "") {
                                out = results[i][1];
                            }
                            else {
                                var out = "<img src='avatars/" + results[i][1].toLowerCase() + ".jpg' />";
                                out += " " + results[i][1] + "<br />";
                                out += "<a target='_blank' href='https://twitter.com/";
                                out += results[i][1] + "/status/" + results[i][0] + "'>";
                                out += " ver tuit original</a>";
                            }
                            infowindow.setContent(out);
                            infowindow.open(map, marker);
                        }
                   })(marker, i));
             }
         }
         google.maps.event.addDomListener(window, 'load', initialize);
        </script>
    </head>
  <body>

      <div class="container">
          <div class="row">
              <div class="col-xs-12 col-md-12 col-lg-12">
                <h2>Tuits georeferenciados en la cercanía de las cárceles del Perú</h2>
                <p>Este es un mapa interactivo. Creado por 
                <a
                    href="https://twitter.com/aniversarioperu">@AniversarioPeru</a>.
              </div>
        </div>
      

          <div class="row">
              <div class="col-xs-12 col-md-12 col-lg-12">
                Los ínconos de sombrero de policía corresponden a la ubicación de cada
                una de las cárceles. Los otros marcadores son tuits que se han podido
                georeferenciar porque incluyen coordenadas geográficas.</p>

                <p>Hacer click en cada <i>marker</i> para acceder al tuit original.</p>
    
                <p>La información es cosechada y el mapa elaborado por mi bot
                llamado <a href="https://twitter.com/arturitobot">@ArturitoBot
                    y que tiene una cuenta en twitter</a> donde
                retuiteará aquellos tuits que se emitan desde dentro de las cárceles
                peruanas.</p>
              </div>
        </div>

          <div class="row">
              <div class="col-xs-12 col-md-12 col-lg-12">
                  <div id="map_canvas"></div>
              </div>
        </div>


    </div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47999227-1', 'horis.me');
  ga('send', 'pageview');

</script>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap/js/bootstrap.min.js"></script>

    <hr class="hr-footer">

<footer>
<div class="container">
    <small class="pull-right">Powered by <a href="http://aniversarioperu.wordpress.com/cv/">AniversarioPerú</a></small>
</div>
<br />
</footer>

  </body>
</html>
